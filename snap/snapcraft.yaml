name: battery-notifier
base: core20
version: '0.0.1'
summary: Notifies you when a device battery is too low or too high.
description: |
  You know what? This app is amazing! It does all the things
  for you. Some say it keeps you young, maybe even happy.

grade: stable
confinement: classic

parts:
  slack:
    plugin: dump
    source: out/make/deb/x64/battery-notifier_0.1_amd64.deb
    source-type: deb
    after:
      - desktop-gtk3
    stage-packages:
      - libasound2
      - libnotify4
      - libnspr4
      - libnss3
      - libpcre3
      - libpulse0
      - libxss1
      - libxtst6
  electron-launch:
    plugin: dump
    source: files/
#    prepare: |
#      chmod +x bin/electron-launch

apps:
  myApp:
    command: bin/electron-launch $SNAP/usr/lib/battery-notifier/battery-notifier
    desktop: usr/share/applications/battery-notifier.desktop
    # Correct the TMPDIR path for Chromium Framework/Electron to ensure
    # libappindicator has readable resources.
    environment:
      TMPDIR: $XDG_RUNTIME_DIR
